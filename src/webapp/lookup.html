<!DOCTYPE html>
<html>
<head>
    <title>Lookup Reservation - Moffat Bay Marina</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="top-banner">
        <div class="logo">
          <a href="index.html"><img class="logo-img" src="images/logo.PNG" alt="Logo if we're feeling fancy!"></a>
        </div>
        <nav class="nav-links">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a href="register.html">Register</a></li>
                <li><a href="login.html">Login</a></li>
                <li><a href="reserve.php">Reserve a Slip</a></li>
                <li><a href="waitlist.html">Wait List</a></li>
                <li><a href="lookup.html">Reservation Lookup</a></li>
            </ul>
        </nav>  
    </header>
    <main>
        <section>
            <h2>Find Your Reservation</h2>
            <p id="loginMessage"><a href="login.html">Please login to view your reservation.</a></p>
        </section>
    </main>
    <footer>
        <p>Â© 2025 Moffat Bay Marina</p>
    </footer>

    <script>
            // Display modals and initialize if logged in
        window.onload = function () {

            // Fetch session info to determine if logged in
            fetch('getSession.php')
                .then(res => res.json())
                .then(session => {
                    if (session.loggedIn) {
                        window.location.href = 'reservationSummary.php';
                    } else {
                        document.getElementById('lookupForm').style.display = 'block';
                    }
                });
        };





    //      function isLoggedIn() {
    //          //TODO: implement session management
    //          sessionStorage.getItem("loggedIn") === "true";
    //          return true;
    //      }

    //      // Show or hide the form based on login status
    //      if (isLoggedIn()) {
    //          document.getElementById("loginMessage").style.display = "none";
    //          document.getElementById("lookupForm").style.display = "block";

    //      document.getElementById("lookupForm").addEventListener("submit", async (event) => {
    //         event.preventDefault();

    //         const lookupValue = document.getElementById("lookupValue").value;

    //         try {
    //             const response = await fetch("LookupServlet?" + new URLSearchParams({
    //                 lookupValue: lookupValue
    //             }), {
    //                 method: "GET",
    //                 headers: {
    //                     "Content-Type": "application/json"
    //                 }
    //             });

    //             if (response.ok) {
    //                 const data = await response.json();
    //                 displayReservation(data);
    //             } else {
    //                 document.getElementById("lookupResult").innerText = "Reservation not found.";
    //             }
    //         } catch (error) {
    //             console.error("Error:", error);
    //             document.getElementById("lookupResult").innerText = "Error looking up reservation.";
    //         }
    //     });

    //     function displayReservation(data) {
    //         document.getElementById("lookupResult").innerHTML = `
    //             <h3>Reservation Details:</h3>
    //             <p>Boat Name: ${data.boatName}</p>
    //             <p>Boat Size: ${data.boatLength} ft</p>
    //             <p>Check-in Date: ${data.checkInDate}</p>
    //              <p>Slip Size: ${data.slipSize} ft</p>
    //         `;
    //     }
    // } else {
    //         document.getElementById("loginMessage").style.display = "block";
    //         document.getElementById("lookupForm").style.display = "none";
    //     }
    </script>
</body>
</html>